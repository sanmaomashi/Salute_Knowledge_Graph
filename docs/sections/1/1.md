## 一、概论

随着移动互联网的发展，万物互联成为了可能，这种互联所产生的数据也在爆发式地增长，而且这些数据恰好可以作为分析关系的有效原料。如果说以往的智能分析专注在每一个个体上，在移动互联网时代则除了个体，这种个体之间的关系也必然成为我们需要深入分析的很重要一部分。 在一项任务中，只要有关系分析的需求，知识图谱就“有可能”派的上用场。

![image-20210112120413811](https://gitee.com/zgf1366/pic_store/raw/master/img/20210112120413.png)

## 二、什么是信息和知识？

- 信息是指外部的客观事实。举例：这里有一瓶水，它现在是7°。
- 知识是对外部客观规律的归纳和总结。举例：水在零度的时候会结冰。

“客观规律的归纳和总结” 似乎有些难以实现。Quora 上有另一种经典的解读，区分 “信息” 和 “知识” 。

![image-20210112162121937](https://gitee.com/zgf1366/pic_store/raw/master/img/20210112162122.png)

有了这样的参考，我们就很容易理解，在信息的基础上，建立实体之间的联系，就能行成 “知识”。当然，我认为叫事实（Fact）更为合适。换句话说，知识图谱是由一条条知识组成，每条知识表示为一个SPO三元组(Subject-Predicate-Object)。

![image-20210112162218316](https://gitee.com/zgf1366/pic_store/raw/master/img/20210112162225.png)

## 三、什么是知识图谱？

### 3.1 发展

实际上，知识图谱并不是一个全新的概念，早在 2006 年就有文献提出了语义网（Semantic Network）的概念，呼吁推广、完善使用本体模型来形式化表达数据中的隐含语义，RDF（resource description framework，资源描述框架）模式和 OWL（Web ontology language，万维网本体语言）就是基于上述目的产生的。用电子科技大学徐增林教授的论文原文来说：知识图谱技术的出现正是基于以上相关研究，是对语义网标准与技术的一次扬弃与升华。

知识图谱是由Google公司在2012年提出来的一个新的概念，主要是用来优化现有的搜索引擎，增强用户搜索质量及体验。不同于基于关键词搜索的传统搜索引擎，知识图谱可用来更好地查询复杂的关联信息，从语义层面理解用户意图，改进搜索质量。

### 3.2 定义

从学术的角度，我们可以对知识图谱给一个这样的定义：知识图谱本质上是语义网络，是一种基于图的数据结构，由节点(Point)和边(Edge)组成。在知识图谱里，每个节点表示现实世界中存在的“实体”，比如人、地名、概念、药物、公司等。关系则用来表达不同实体之间的某种联系。比如“人”-“居住在”-“北京”、张三和李四是“朋友”、逻辑回归是深度学习的“先导知识”等等。通俗地讲，知识图谱就是把所有不同种类的信息（Heterogeneous Information）连接在一起而得到的一个关系网络。知识图谱提供了从“关系”的角度去分析问题的能力，是关系的最有效的表示方式。

从实际应用的角度出发其实可以简单地把知识图谱理解成多关系图（Multi-relational Graph）。多关系图一般包含多种类型的节点和多种类型的边。比如左下图表示一个经典的图结构，右边的图则表示多关系图，因为图里包含了多种类型的节点和边。这些类型由不同的颜色来标记。

![image-20210112160512607](https://gitee.com/zgf1366/pic_store/raw/master/img/20210112160512.png)

知识图谱以结构化的形式描述客观世界中概念、实体及其关系，是在计算机世界中表示认知世界和物理世界中信息和知识的有效载体

![image-20210112170104118](https://gitee.com/zgf1366/pic_store/raw/master/img/20210112170104.png)

Web视角：像建立文本之间的超链接一样，建立数据之间的语义链接，并支持语义搜索
NLP视角：怎样从文本中抽取语义和结构化数据
KR视角：怎样利用计算机符号来表示和处理知识
AI视角：怎样利用知识库来辅助理解人的语言
DB视角：用图的方式去存储知识

![image-20210120235334350](https://gitee.com/zgf1366/pic_store/raw/master/img/20210120235334.png)

### 3.3 基本单位

1. 知识图谱的基本单位，便是“实体（Entity）-关系（Relationship）-实体（Entity）”构成的三元组，这也是知识图谱的核心。

- 实体: 指的是具有可区别性且独立存在的某种事物。实体是知识图谱中的最基本元素，不同的实体间存在不同的关系。如图中的“中国”、“北京”、“16410平方公里”等。

- 关系: 关系是连接不同的实体，指代实体之间的联系。通过关系节点把知识图谱中的节点连接起来，形成一张大图。如图中的“人口”、“首都”、“面积”等

2. 常见的知识图谱示意图主要包含有三种节点：`实体、概念、属性`。

- 实体指的是具有可区别性且独立存在的某种事物。如某一个人、某一座城市、某一种植物、某一件商品等等。世界万物由具体事物组成，此指实体。实体是知识图谱中的最基本元素，不同的实体间存在不同的关系。
- 概念指的是具有同种特性的实体构成的集合，如国家、民族、书籍、电脑等。
- 属性则用于区分概念的特征，不同概念具有不同的属性。不同的属性值类型对应于不同类型属性的边。如果属性值对应的是概念或实体，则属性描述两个实体之间的关系，称为对象属性；如果属性值是具体的数值，则称为数据属性。

### 3.4 为什么用知识图谱？

要明确的一点是，对于自身的业务问题到底需不需要知识图谱系统的支持。因为在很多的实际场景，即使对关系的分析有一定的需求，实际上也可以利用传统数据库来完成分析的。所以为了避免使用知识图谱而选择知识图谱，以及更好的技术选型，以下给出了几点总结：

![image-20210112182746083](https://gitee.com/zgf1366/pic_store/raw/master/img/20210112182746.png)

## 四、知识图谱的设计

图谱的设计是一门艺术，不仅要对业务有很深的理解、也需要对未来业务可能的变化有一定预估，从而设计出最贴近现状并且性能高效的系统。在知识图谱设计的问题上，我们肯定会面临以下几个常见的问题：

1. 需要哪些实体、关系和属性？
2. 哪些属性可以做为实体，哪些实体可以作为属性？
3. 哪些信息不需要放在知识图谱中？ 

基于这些常见的问题，我们从以往的设计经验中抽象出了一系列的设计原则。这些设计原则就类似于传统数据库设计中的范式，来引导相关人员设计出更合理的知识图谱系统，同时保证系统的高效性。

![image-20210112183752919](https://gitee.com/zgf1366/pic_store/raw/master/img/20210112183752.png)

接下来，我们举几个简单的例子来说明其中的一些原则。 

首先是，`业务原则`（Business Principle），它的含义是 “一切要从业务逻辑出发，并且通过观察知识图谱的设计也很容易推测其背后业务的逻辑，而且设计时也要想好未来业务可能的变化”。

举个例子，可以观察一下下面这个图谱，并试问自己背后的业务逻辑是什么。通过一番观察，其实也很难看出到底业务流程是什么样的。做个简单的解释，这里的实体-“申请”意思就是application，如果对这个领域有所了解，其实就是进件实体。在下面的图中，申请和电话实体之间的“has_phone”，“parent phone”是什么意思呢？

![image-20210112183826936](https://gitee.com/zgf1366/pic_store/raw/master/img/20210112183827.png)

﻿接下来再看一下下面的图，跟之前的区别在于我们把申请人从原有的属性中抽取出来并设置成了一个单独的实体。在这种情况下，整个业务逻辑就变得很清晰，我们很容易看出张三申请了两个贷款，而且张三拥有两个手机号，在申请其中一个贷款的时候他填写了父母的电话号。总而言之，一个好的设计很容易让人看到业务本身的逻辑。

![image-20210112183839549](https://gitee.com/zgf1366/pic_store/raw/master/img/20210112183839.png)

﻿接下来再看一个原则叫做`效率原则`（Efficiency Principle）。效率原则让知识图谱尽量轻量化、并决定哪些数据放在知识图谱，哪些数据不需要放在知识图谱。在这里举一个简单的类比，在经典的计算机存储系统中，我们经常会谈论到内存和硬盘，内存作为高效的访问载体，作为所有程序运行的关键。这种存储上的层次结构设计源于数据的局部性-“locality”，也就是说经常被访问到的数据集中在某一个区块上，所以这部分数据可以放到内存中来提升访问的效率。 类似的逻辑也可以应用到知识图谱的设计上：我们把常用的信息存放在知识图谱中，把那些访问频率不高，对关系分析无关紧要的信息放在传统的关系型数据库当中。`效率原则的核心在于把知识图谱设计成小而轻的存储载体。`

![image-20210112183950483](https://gitee.com/zgf1366/pic_store/raw/master/img/20210112183950.png)

比如在下面的知识图谱中，我们完全可以把一些信息比如“年龄”，“家乡”放到传统的关系型数据库当中，因为这些数据对于：a. 分析关系来说没有太多作用  b.  访问频率低，放在知识图谱上反而影响效率

![image-20210112184010377](https://gitee.com/zgf1366/pic_store/raw/master/img/20210112184010.png)

另外，从`分析原则`（Analytics Principle）的角度，我们不需要把跟关系分析无关的实体放在图谱当中；从`冗余原则`（Redundancy Principle）的角度，有些重复性信息、高频信息可以放到传统数据库当中。

## 五、知识图谱的架构

知识图谱的架构主要包括自身的`逻辑架构`以及`体系架构`。

### 5.1 逻辑架构

知识图谱在逻辑结构上可分为模式层与数据层两个层次：

- 数据层：
  - 比尔盖茨-妻子-梅琳达·盖茨，比尔盖茨-总裁-微软
  - 主要是由一系列的事实组成，而知识将以`事实`为单位进行存储。如果用（实体1，关系，实体2）、（实体、属性，属性值）这样的三元组来表达事实，可选择图数据库作为存储介质，例如开源的 Neo4j、Twitter 的 FlockDB、JanusGraph 等。
- 模式层：
  - 实体-关系-实体，实体-属性-性值
  - 构建在数据层之上，是知识图谱的核心，主要是通过本体库来规范数据层的一系列事实表达。通常采用本体库来管理知识图谱的模式层。本体是结构化知识库的概念模板，通过本体库而形成的知识库不仅层次结构较强，并且冗余程度较小。

### 5.2 体系架构

知识图谱的体系架构是指其构建模式的结构，如下图所示：

![1](https://gitee.com/zgf1366/pic_store/raw/master/img/20210112163638.jpg)

英文图如下图所示，其中虚线框内的部分为知识图谱的构建过程，同时也是知识图谱更新的过程。

![image-20210112164320884](https://gitee.com/zgf1366/pic_store/raw/master/img/20210112164320.png)

大规模知识库的构建与应用需要多种智能信息处理技术的支持。通过知识抽取技术，可以从一些公开的半结构化、非结构化的数据中提取出实体、关系、属性等知识要素。通过知识融合，可消除实体、关系、属性等指称项与事实对象之间的歧义，形成高质量的知识库。知识推理则是在已有的知识库基础上进一步挖掘隐含的知识，从而丰富、扩展知识库。分布式的知识表示形成的综合向量对知识库的构建、推理、融合以及应用均具有重要的意义。

1. 虚线框的最左边是三种输入数据结构，结构化数据、半结构化数据、非结构化数据。这些数据可以来自任何地方，只要它对要构建的这个知识图谱有帮助。

2. 虚线框里面的是整个的知识图谱的构建过程。其中主要包含了3个阶段，信息抽取、知识融合、知识加工。

3. 最右边是生成的知识图谱，而且这个技术架构是循环往复，迭代更新的过程。知识图谱不是一次性生成，是慢慢积累的过程。

   - 信息抽取：从各种类型的数据源中提取出实体、属性以及实体间的相互关系，在此基础上形成本体化的知识表达；

   - 知识融合：在获得新知识之后，需要对其进行整合，以消除矛盾和歧义，比如某些实体可能有多种表达，某个特定称谓也许对应于多个不同的实体等；

   - 知识加工：对于经过融合的新知识，需要经过质量评估之后（部分需要人工参与甄别），才能将合格的部分加入到知识库中，以确保知识库的质量。

![image-20210112164450124](https://gitee.com/zgf1366/pic_store/raw/master/img/20210112164450.png)

## 六、知识图谱的设计原则

对于知识图谱最重要的第一步一定是`业务分析`，也就是说你目前要解决的业务痛点是不是一定需要使用知识图谱,把握如下几个原则：

1. 一个项目的成败在于正确定义问题，这远比使用什么技术重要：
2. 一切从业务痛点出发，切记不要通过技术去寻找相应的问题。
3. 在确定使用知识图谱之前，一定要多问自己为什么要用，传统的关系数据库以及技术不能解决？

再想好前面几个问题，如果确实需要采用知识图谱解决的话，就可以着手准备如何进行知识图谱构建。

最基本的知识图谱分为`通用知识图谱`以及`领域知识图谱`，两者在构建时流程的侧重点以及使用的技术会有所不同，现在在企业中落地比较多的也大多是领域知识图谱，总的来说领域知识图谱的构建流程如下图所示：

![image-20210112162947408](https://gitee.com/zgf1366/pic_store/raw/master/img/20210112162947.png)

### 6.1 知识建模

知识建模也叫做业务建模，主要是将业务问题按照知识图谱约定的一些模式进行业务抽象以及业务建模，主要是实体定义、关系定义、事件定义等，可以采用传统的rdf、owl等表示方法进行，也可采用现在比较常用的属性图进行，这两者的主要区别就是rdf基本都是通过三元组进行表示，而属性图可以在实体上有属性的概念。

### 6.2 构建方式

曾经知识图谱非常流行`自顶向下`(top-down)的构建方式。（所谓自顶向下构建是借助百科类网站等结构化数据源，从高质量数据中提取本体和模式信息，加入到知识库中）自顶向下指的是先为知识图谱定义好本体与数据模式，再将实体加入到知识库。该构建方式需要利用一些现有的结构化知识库作为其基础知识库，例如 Freebase 项目就是采用这种方式，它的绝大部分数据是从维基百科中得到的。

然而目前，大多数知识图谱都采用`自底向上`(bottom-up)的构建方式。自底向上指的是从一些开放链接数据（也就是 “信息”）中提取出实体，选择其中置信度较高的加入到知识库，再构建实体与实体之间的联系。

## 七、知识图谱的挑战

### 7.1 数据的噪声

首先，数据中存在着很多的噪声。即便是已经存在库里的数据，我们也不能保证它有100%的准确性。在这里主要从两个方面说起。

第一，目前积累的数据本身有错误，所以这部分错误数据需要纠正。 最简单的纠正办法就是做离线的不一致性验证。

第二， 数据的冗余。比如借款人张三填写公司名字为”普惠“，借款人李四填写的名字为”普惠金融“，借款人王五则填写成”普惠金融信息服务有限公司“。虽然这三个人都隶属于一家公司，但由于他们填写的名字不同，计算机则会认为他们三个是来自不同的公司。那接下来的问题是，怎么从海量的数据中找出这些存在歧义的名字并将它们合并成一个名字？ 这就涉及到自然语言处理中的”消歧分析”技术。

![1](https://gitee.com/zgf1366/pic_store/raw/master/img/20210112165100.jpg)

### 7.2 非结构化数据处理能力

在大数据时代，很多数据都是未经处理过的非结构化数据，比如文本、图片、音频、视频等。特别在互联网金融行业里，往往会面对大量的文本数据。怎么从这些非结构化数据里提取出有价值的信息是一件非常有挑战性的任务，这对掌握的机器学习，数据挖掘，自然语言处理能力提出了更高的门槛。

![1](https://gitee.com/zgf1366/pic_store/raw/master/img/20210112165201.jpg)

### 7.3 知识推理

推理能力是人类智能的重要特征，使得我们可以从已有的知识中发现隐含的知识， 

一般的推理往往需要一些规则的支持 。例如“朋友”的“朋友”，可以推理出“朋友”关系，“父亲”的“父亲”可以推理出“祖父”的关系。再比如张三的朋友很多也是李四的朋友，那我们可以推测张三和李四也很有可能是朋友关系。当然，这里会涉及到概率的问题。当信息量特别多的时候，怎么把这些信息（side information）有效地与推理算法结合在一起才是最关键的。常用的推理算法包括基于逻辑（Logic） 的推理和基于分布式表示方法（Distributed Representation）的推理。随着深度学习在人工智能领域的地位变得越来越重要，基于分布式表示方法的推理也成为目前研究的热点。



## 八、总结

> 大数据、小样本、构建有效的生态闭环是关键

虽然现在能获取的数据量非常庞大，我们仍然面临着小样本问题，也就是样本数量少。

假设我们需要搭建一个基于机器学习的反欺诈评分系统，我们首先需要一些欺诈样本。但实际上，我们能拿到的欺诈样本数量不多，即便有几百万个贷款申请，最后被我们标记为欺诈的样本很可能也就几万个而已。这对机器学习的建模提出了更高的挑战。每一个欺诈样本我们都是以很高昂的“代价”得到的。随着时间的推移，我们必然会收集到更多的样本，但样本的增长空间还是有局限的。这有区别于传统的机器学习系统，比如图像识别，不难拿到好几十万甚至几百万的样本。

在这种小样本条件下，构建有效的`生态闭环`尤其的重要。所谓的生态闭环，指的是构建有效的自反馈系统使其能够实时地反馈给我们的模型，并使得模型不断地自优化从而提升准确率。为了搭建这种自学习系统，我们不仅要完善已有的数据流系统，而且要深入到各个业务线，并对相应的流程进行优化。这也是整个反欺诈环节必要的过程，我们要知道整个过程都充满着博弈。所以我们需要不断地通过反馈信号来调整我们的策略。

从技术来说，知识图谱的难点在于 NLP，因为我们需要机器能够理解海量的文字信息。但在工程上，我们面临更多的问题，来源于知识的获取，知识的融合。搜索领域能做的越来越好，是因为有成千上万（成百万上亿）的用户，用户在查询的过程中，实际也在优化搜索结果，这也是为什么百度的英文搜索不可能超过 Google，因为没有那么多英文用户。知识图谱也是同样的道理，如果将用户的行为应用在知识图谱的更新上，才能走的更远。

知识图谱肯定不是人工智能的最终答案，但知识图谱这种综合各项计算机技术的应用方向，一定是人工智能未来的形式之一。